# ===============================
# Ecommind â€” Netlify (final OK)
# ===============================

[build]
  publish  = "public"
  functions = "netlify/functions"
  command  = ""   # pas de build step

# --- API redirects ---
[[redirects]]
  from = "/api/llm"
  to   = "/.netlify/functions/llm"
  status = 200

[[redirects]]
  from = "/api/stt"
  to   = "/.netlify/functions/stt"
  status = 200

[[redirects]]
  from = "/api/tts"
  to   = "/.netlify/functions/tts"
  status = 200

[[redirects]]
  from = "/api/lang"
  to   = "/.netlify/functions/lang"
  status = 200

[[redirects]]
  from = "/api/health"
  to   = "/.netlify/functions/health"
  status = 200

# SPA fallback
[[redirects]]
  from = "/*"
  to   = "/index.html"
  status = 200

# --- Functions (PAS de [[functions]] !) ---
[functions]
  node_bundler = "esbuild"
  directory    = "netlify/functions"

# Timeout/memory via sous-table pattern (syntaxe attendue par Netlify)
[functions."*"]
  timeout = 20
  memory  = 512

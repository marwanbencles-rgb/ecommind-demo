# ===============================
# Ecommind — Netlify minimal OK
# ===============================

[build]
  publish  = "public"
  functions = "netlify/functions"
  # Pas de build step (site statique)
  command  = ""

# --- API redirects ---
[[redirects]]
  from = "/api/llm"
  to   = "/.netlify/functions/llm"
  status = 200

[[redirects]]
  from = "/api/stt"
  to   = "/.netlify/functions/stt"
  status = 200

[[redirects]]
  from = "/api/tts"
  to   = "/.netlify/functions/tts"
  status = 200

[[redirects]]
  from = "/api/lang"
  to   = "/.netlify/functions/lang"
  status = 200

[[redirects]]
  from = "/api/health"
  to   = "/.netlify/functions/health"
  status = 200

# SPA fallback
[[redirects]]
  from = "/*"
  to   = "/index.html"
  status = 200

# --- Functions (config globale) ---
[functions]
  node_bundler = "esbuild"

# ✅ Timeout/memory doivent être en bloc pattern (et NON pas [functions.config])
[[functions]]
  pattern = "*"
  timeout = 20
  memory  = 512
